var o=Object.defineProperty,l=Object.defineProperties,e=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(l,e,n)=>e in l?o(l,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[e]=n,a=(o,l)=>{for(var e in l||(l={}))t.call(l,e)&&i(o,e,l[e]);if(n)for(var e of n(l))r.call(l,e)&&i(o,e,l[e]);return o};import{q as s,l as d,a as c,F as u,y as m,B as v,b as p,H as b,N as C}from"./vendor.js";class f{getID(){return this.data.id}constructor(o){var l,e;this.data=o,this.coloredParts=["shell","cabinet"].map((l=>{var e,n;const t=o[l+"Image"];return{name:l,image:null==(e=null==t?void 0:t[0])?void 0:e.url,color:null==(n=o[l+"Color"])?void 0:n[0]}})),this.combinedColor=null!=(e=null==(l=this.data.combinationColor)?void 0:l[0])?e:null}get combinedImage(){var o,l;return null==(l=null==(o=this.data.combinationImage)?void 0:o[0])?void 0:l.url}}const g=async o=>{return(l="https://api.baseql.com/airtable/graphql/appMt27Uj2WHfsPP7",e=`\n\tproductColorCombinations( product : "${o}" ) {\n\t\tid\n\t\tshellColor {\n\t\t\tid\n\t\t\tname\n\t\t\timage\n\t\t}\n\t\tcabinetColor {\n\t\t\tid\n\t\t\tname\n\t\t\timage\n\t\t}\n\t\tcombinationImage\n\t\tshellImage\n\t\tcabinetImage\n\t\tcombinationColor {\n\t\t\tid\n\t\t\tname\n\t\t\timage\n\t\t}\n\t}\n\t`,fetch(l,{method:"POST",body:JSON.stringify({query:`{${e}}`}),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((o=>o.json())).then((o=>o.data))).then((o=>(console.log(o),o))).then((o=>{var l;return null==(l=null==o?void 0:o.productColorCombinations)?void 0:l.map((o=>new f(o)))}));var l,e},h=(o,n)=>{let t=o;const r=o=>{t=a(a({},t),o),n(t)},i=o=>l=>r({[o]:l}),s=i("combinations"),d=i("error"),c=i("colorsIndex"),u=i("combinedColors"),m=(o,l)=>{var e,n;const r={},i=t.combinations.filter((e=>{for(const n of e.coloredParts)if(n.name===o&&n.color&&n.color.name!==l)return!1;return!0})),a=[];for(const d of i){let o=0;for(const l of d.coloredParts)l.color&&t.selectedPartColors[l.name]===l.color.name&&o++;a[o]=d}const s=a.pop();if(null==s?void 0:s.coloredParts)for(const t of s.coloredParts)(null==(e=null==t?void 0:t.color)?void 0:e.name)&&(null==t?void 0:t.name)&&(r[t.name]=null==(n=null==t?void 0:t.color)?void 0:n.name);return r},v=o=>{const l=t.selectedPartColors;return t.combinations.filter((e=>{for(const n of e.coloredParts)if(n.name!==o&&l[n.name]&&n.color&&l[n.name]!==n.color.name)return!1;return!0}),[])},p=o=>{var l,e;return null!=(e=null==(l=v(o))?void 0:l.reduce(((l,e)=>(e.coloredParts.forEach((e=>{var n;(null==e?void 0:e.name)===o&&(null==(n=null==e?void 0:e.color)?void 0:n.name)&&l.push(e.color.name)})),l)),[]))?e:[]},b=(o,l)=>p(o).includes(l);return{state:t,actions:{setCombinations:s,setError:d,setColorsIndexedByPart:o=>{i("colorsIndexedByPart")(o)},setColorsIndex:c,setCombinedColors:u,selectPartColor:(o,n)=>{var i,s;b(o,n)?r({selectedPartColors:(i=a({},t.selectedPartColors),s={[o]:n},l(i,e(s)))}):r({selectedPartColors:m(o,n)})},selectCombinedColor:o=>{r({selectedCombinedColor:o})}},utilities:{getCompatibleCombinationsFor:v,getCompatibleColorsFor:p,isCompatiblePartColor:b,getSelectionCompatibleWith:m,getSelectedCombination:()=>{var o;return null==(o=null==t?void 0:t.combinations)?void 0:o.find((o=>{var l;if(o.coloredParts.length>0){for(const e of o.coloredParts)if(!t.selectedPartColors[e.name]||t.selectedPartColors[e.name]!==(null==(l=null==e?void 0:e.color)?void 0:l.name))return!1;return!0}return!1}))}}}},P=s(null),y=()=>{var o;return null==(o=u(P))?void 0:o.state},x=()=>{var o;return null==(o=u(P))?void 0:o.actions},I=()=>{var o;return null==(o=u(P))?void 0:o.utilities},w=({children:o})=>{const[l,e]=d({combinations:[],colorsIndexedByPart:{},selectedPartColors:{}});return c(P.Provider,{value:h(l,e)},o)},O=()=>{const{error:o}=y();return console.log("[ERROR]",o),c("div",null,c("div",null,"An Error Occurred"),c("p",null,null==o?void 0:o.name),c("p",null,null==o?void 0:o.stack))},j=()=>{var o,l;const{combinations:e,selectedCombinedColor:n}=y(),{getSelectedCombination:t}=I(),r=t(),i=n?[null==(o=e.find((o=>{var l;return(null==(l=null==o?void 0:o.combinedColor)?void 0:l.name)===n})))?void 0:o.combinedImage]:(null==r?void 0:r.combinedImage)?[r.combinedImage]:null==(l=null==r?void 0:r.coloredParts)?void 0:l.map((o=>null==o?void 0:o.image));return i?c(v,{w:"full",position:"relative"},i.filter((o=>o)).map((o=>c("img",{src:o,class:"gsg-procuts-hot-tub"})))):null},S=()=>{var o;const{colorsIndexedByPart:l,colorsIndex:e,selectedPartColors:n,combinedColors:t,selectedCombinedColor:r}=y(),{selectPartColor:i,selectCombinedColor:a}=x(),{isCompatiblePartColor:s}=I(),d=Object.entries(l).reduce(((o,[l,t])=>{const r=[],a=[];t.forEach((o=>{var t,d,u;const m=s(l,o),v=null==e?void 0:e[o];if(v){const o={width:"60px",outline:n[l]===(null==v?void 0:v.image)?"1px solid rgba(0,0,0,0.1)":"",opacity:m?1:.5},e=c("li",{style:o,onClick:()=>i(l,null==v?void 0:v.name)},c("img",{style:{width:"60px",height:"60px",objectFit:"cover",position:"static",margin:"auto"},src:null!=(u=null==(d=null==(t=null==v?void 0:v.image)?void 0:t[0])?void 0:d.url)?u:"",alt:`${null==v?void 0:v.name} ${l}`}));m?r.push(e):a.push(e)}}),[]);const d=[];return r.length>0&&d.push(c("div",{style:{marginBottom:20}},c("div",{style:{marginBottom:7}},c("b",null,"Compatible ",l," Colors")),c("ul",{style:{display:"flex",flexWrap:"wrap",listStyle:"none",margin:"0",gap:"16px"}},r))),a.length>0&&d.push(c("div",null,c("div",{style:{marginBottom:7}},c("b",null,"Other ",l," Colors")),c("ul",{style:{display:"flex",flexWrap:"wrap",listStyle:"none",margin:"0",gap:"16px"}},a))),o.push(c("div",{style:{display:"flex"}},d)),o}),[]);if(t&&(null==t?void 0:t.length)>0){const l=null!=(o=null==t?void 0:t.reduce(((o,l)=>{var n,t;const i=null==e?void 0:e[l];return i&&o.push(c("li",{style:{width:"150px",outline:r===(null==i?void 0:i.name)?"1px solid rgba(0,0,0,0.1)":""},onClick:()=>a(null==i?void 0:i.name)},c("img",{style:{width:"100%"},src:null==(t=null==(n=null==i?void 0:i.image)?void 0:n[0])?void 0:t.url,alt:`${null==i?void 0:i.name}`}))),o}),[]))?o:[];d.push(c("div",null,c("div",null,c("b",null,"Combined Colors")),c("ul",{style:{display:"flex",flexWrap:"wrap",listStyle:"none",margin:"0",gap:"16px"}},l)))}return c(p,null,d)},E=()=>c("div",{class:"gsg-color-selector"},c("h3",null,"Color Selector"),c("div",{style:{display:"flex",justifyContent:"space-around"}},c(j,null),c(S,null))),B=({product:o})=>{const{setCombinations:l,setError:e,setColorsIndexedByPart:n,setColorsIndex:t,setCombinedColors:r,selectCombinedColor:i,selectPartColor:a}=x(),{error:s,selectedPartColors:d,selectedCombinedColor:u,combinedColors:v,colorsIndexedByPart:p}=y(),{isCompatiblePartColor:b}=I();if(null==v?void 0:v[0]){const o=v[0];!u&&o&&i(o)}else for(const[c,m]of Object.entries(p))if(!d[c])for(const o of m)o&&b(c,o)&&a(c,o);return m((()=>{g(o).then((o=>{var e,i,a;l(o),n(null!=(e=null==o?void 0:o.reduce(((o,l)=>{var e;return null==(e=null==l?void 0:l.coloredParts)||e.forEach((l=>{var e;if(l.color){let n=null!=(e=o[l.name])?e:[];l.color.name&&!n.includes(l.color.name)&&n.push(l.color.name),o[l.name]=n}})),o}),{}))?e:{}),t(null!=(i=null==o?void 0:o.reduce(((o,l)=>{var e,n,t;return(null==l?void 0:l.combinedColor)&&(null==(e=null==l?void 0:l.combinedColor)?void 0:e.name)&&!o[null==(n=null==l?void 0:l.combinedColor)?void 0:n.name]?o[null==(t=null==l?void 0:l.combinedColor)?void 0:t.name]=null==l?void 0:l.combinedColor:l.coloredParts.forEach((l=>{var e,n,t;(null==(e=l.color)?void 0:e.name)&&!o[null==(n=l.color)?void 0:n.name]&&(o[null==(t=null==l?void 0:l.color)?void 0:t.name]=l.color)})),o}),{}))?i:{}),r(null!=(a=null==o?void 0:o.reduce(((o,l)=>{var e;return(null==(e=null==l?void 0:l.combinedColor)?void 0:e.name)&&!o.includes(l.combinedColor.name)&&o.push(l.combinedColor.name),o}),[]))?a:{})})).catch(e)}),[o]),c("div",null,c(s?O:E,null))};var W=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ProductColors:({product:o})=>c(w,null,c(B,{product:o})),WordpressDashboard:()=>c(v,null,c(b,null,"Wordpress Dashboard"))});null==window||window.addEventListener("load",(()=>{document.querySelectorAll("[data-component]").forEach((o=>{const l=o.getAttribute("data-component"),e=o.getAttributeNames().reduce(((l,e)=>{if(e&&"data-component"!==e){const n=o.getAttribute(e);n&&(l[e]=n)}return l}),{});if(l){const n=W[l];n&&C(c(n,a({},e)),o)}}))}));
