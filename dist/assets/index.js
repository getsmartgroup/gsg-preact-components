var o=Object.defineProperty,l=Object.prototype.hasOwnProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,t=(l,e,n)=>e in l?o(l,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[e]=n,r=(o,r)=>{for(var i in r||(r={}))l.call(r,i)&&t(o,i,r[i]);if(e)for(var i of e(r))n.call(r,i)&&t(o,i,r[i]);return o};import{q as i,l as a,a as s,F as d,y as c,B as u,b as m,N as v}from"./vendor.js";!function(o=".",l="__import__"){try{self[l]=new Function("u","return import(u)")}catch(e){const n=new URL(o,location),t=o=>{URL.revokeObjectURL(o.src),o.remove()};self[l]=o=>new Promise(((e,r)=>{const i=new URL(o,n);if(self[l].moduleMap[i])return e(self[l].moduleMap[i]);const a=new Blob([`import * as m from '${i}';`,`${l}.moduleMap['${i}']=m;`],{type:"text/javascript"}),s=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(a),onerror(){r(new Error(`Failed to import: ${o}`)),t(s)},onload(){e(self[l].moduleMap[i]),t(s)}});document.head.appendChild(s)})),self[l].moduleMap={}}}("/assets/");class p{getID(){return this.data.id}constructor(o){var l,e;this.data=o,this.coloredParts=["shell","cabinet"].map((l=>{var e,n;const t=o[l+"Image"];return{name:l,image:null==(e=null==t?void 0:t[0])?void 0:e.url,color:null==(n=o[l+"Color"])?void 0:n[0]}})),this.combinedColor=null!=(e=null==(l=this.data.combinationColor)?void 0:l[0])?e:null}get combinedImage(){var o,l;return null==(l=null==(o=this.data.combinationImage)?void 0:o[0])?void 0:l.url}}const b=async o=>{return(l="https://api.baseql.com/airtable/graphql/appMt27Uj2WHfsPP7",e=`\n\tproductColorCombinations( product : "${o}" ) {\n\t\tid\n\t\tshellColor {\n\t\t\tid\n\t\t\tname\n\t\t\timage\n\t\t}\n\t\tcabinetColor {\n\t\t\tid\n\t\t\tname\n\t\t\timage\n\t\t}\n\t\tcombinationImage\n\t\tshellImage\n\t\tcabinetImage\n\t\tcombinationColor {\n\t\t\tid\n\t\t\tname\n\t\t\timage\n\t\t}\n\t}\n\t`,fetch(l,{method:"POST",body:JSON.stringify({query:`{${e}}`}),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((o=>o.json())).then((o=>o.data))).then((o=>(console.log(o),o))).then((o=>{var l;return null==(l=null==o?void 0:o.productColorCombinations)?void 0:l.map((o=>new p(o)))}));var l,e},C=(o,l)=>{let e=o;const n=o=>{e=r(r({},e),o),l(e)},t=o=>l=>n({[o]:l}),i=t("combinations"),a=t("error"),s=t("colorsIndex"),d=t("combinedColors"),c=(o,l)=>{var n,t;const r={},i=e.combinations.filter((e=>{for(const n of e.coloredParts)if(n.name===o&&n.color&&n.color.name!==l)return!1;return!0})),a=[];for(const d of i){let o=0;for(const l of d.coloredParts)l.color&&e.selectedPartColors[l.name]===l.color.name&&o++;a[o]=d}const s=a.pop();if(null==s?void 0:s.coloredParts)for(const e of s.coloredParts)(null==(n=null==e?void 0:e.color)?void 0:n.name)&&(null==e?void 0:e.name)&&(r[e.name]=null==(t=null==e?void 0:e.color)?void 0:t.name);return r},u=o=>{const l=e.selectedPartColors;return e.combinations.filter((e=>{for(const n of e.coloredParts)if(n.name!==o&&l[n.name]&&n.color&&l[n.name]!==n.color.name)return!1;return!0}),[])},m=o=>{var l,e;return null!=(e=null==(l=u(o))?void 0:l.reduce(((l,e)=>(e.coloredParts.forEach((e=>{var n;(null==e?void 0:e.name)===o&&(null==(n=null==e?void 0:e.color)?void 0:n.name)&&l.push(e.color.name)})),l)),[]))?e:[]},v=(o,l)=>m(o).includes(l);return{state:e,actions:{setCombinations:i,setError:a,setColorsIndexedByPart:o=>{t("colorsIndexedByPart")(o)},setColorsIndex:s,setCombinedColors:d,selectPartColor:(o,l)=>{v(o,l)?n({selectedPartColors:r(r({},e.selectedPartColors),{[o]:l})}):n({selectedPartColors:c(o,l)})},selectCombinedColor:o=>{n({selectedCombinedColor:o})}},utilities:{getCompatibleCombinationsFor:u,getCompatibleColorsFor:m,isCompatiblePartColor:v,getSelectionCompatibleWith:c,getSelectedCombination:()=>{var o;return null==(o=null==e?void 0:e.combinations)?void 0:o.find((o=>{var l;if(o.coloredParts.length>0){for(const n of o.coloredParts)if(!e.selectedPartColors[n.name]||e.selectedPartColors[n.name]!==(null==(l=null==n?void 0:n.color)?void 0:l.name))return!1;return!0}return!1}))}}}},f=i(null),g=()=>{var o;return null==(o=d(f))?void 0:o.state},h=()=>{var o;return null==(o=d(f))?void 0:o.actions},y=()=>{var o;return null==(o=d(f))?void 0:o.utilities},P=({children:o})=>{const[l,e]=a({combinations:[],colorsIndexedByPart:{},selectedPartColors:{}});return s(f.Provider,{value:C(l,e)},o)},x=()=>{const{error:o}=g();return console.log("[ERROR]",o),s("div",null,s("div",null,"An Error Occurred"),s("p",null,null==o?void 0:o.name),s("p",null,null==o?void 0:o.stack))},w=()=>{var o,l;const{combinations:e,selectedCombinedColor:n}=g(),{getSelectedCombination:t}=y(),r=t(),i=n?[null==(o=e.find((o=>{var l;return(null==(l=null==o?void 0:o.combinedColor)?void 0:l.name)===n})))?void 0:o.combinedImage]:(null==r?void 0:r.combinedImage)?[r.combinedImage]:null==(l=null==r?void 0:r.coloredParts)?void 0:l.map((o=>null==o?void 0:o.image));return i?s(u,{w:"full",position:"relative"},i.filter((o=>o)).map((o=>s("img",{src:o,class:"gsg-procuts-hot-tub"})))):null},I=()=>{var o;const{colorsIndexedByPart:l,colorsIndex:e,selectedPartColors:n,combinedColors:t,selectedCombinedColor:r}=g(),{selectPartColor:i,selectCombinedColor:a}=h(),{isCompatiblePartColor:d}=y(),c=Object.entries(l).reduce(((o,[l,t])=>{const r=[],a=[];t.forEach((o=>{var t,c,u;const m=d(l,o),v=null==e?void 0:e[o];if(v){const o={width:"60px",outline:n[l]===(null==v?void 0:v.image)?"1px solid rgba(0,0,0,0.1)":"",opacity:m?1:.5},e=s("li",{style:o,onClick:()=>i(l,null==v?void 0:v.name)},s("img",{style:{width:"60px",height:"60px",objectFit:"cover",position:"static",margin:"auto"},src:null!=(u=null==(c=null==(t=null==v?void 0:v.image)?void 0:t[0])?void 0:c.url)?u:"",alt:`${null==v?void 0:v.name} ${l}`}));m?r.push(e):a.push(e)}}),[]);const c=[];return r.length>0&&c.push(s("div",{style:{marginBottom:20}},s("div",{style:{marginBottom:7}},s("b",null,"Compatible ",l," Colors")),s("ul",{style:{display:"flex",flexWrap:"wrap",listStyle:"none",margin:"0",gap:"16px"}},r))),a.length>0&&c.push(s("div",null,s("div",{style:{marginBottom:7}},s("b",null,"Other ",l," Colors")),s("ul",{style:{display:"flex",flexWrap:"wrap",listStyle:"none",margin:"0",gap:"16px"}},a))),o.push(s("div",{style:{display:"flex"}},c)),o}),[]);if(t&&(null==t?void 0:t.length)>0){const l=null!=(o=null==t?void 0:t.reduce(((o,l)=>{var n,t;const i=null==e?void 0:e[l];return i&&o.push(s("li",{style:{width:"150px",outline:r===(null==i?void 0:i.name)?"1px solid rgba(0,0,0,0.1)":""},onClick:()=>a(null==i?void 0:i.name)},s("img",{style:{width:"100%"},src:null==(t=null==(n=null==i?void 0:i.image)?void 0:n[0])?void 0:t.url,alt:`${null==i?void 0:i.name}`}))),o}),[]))?o:[];c.push(s("div",null,s("div",null,s("b",null,"Combined Colors")),s("ul",{style:{display:"flex",flexWrap:"wrap",listStyle:"none",margin:"0",gap:"16px"}},l)))}return s(m,null,c)},j=()=>s("div",{class:"gsg-color-selector"},s("h3",null,"Color Selector"),s("div",{style:{display:"flex",justifyContent:"space-around"}},s(w,null),s(I,null))),O=({product:o})=>{const{setCombinations:l,setError:e,setColorsIndexedByPart:n,setColorsIndex:t,setCombinedColors:r,selectCombinedColor:i,selectPartColor:a}=h(),{error:d,selectedPartColors:u,selectedCombinedColor:m,combinedColors:v,colorsIndexedByPart:p}=g(),{isCompatiblePartColor:C}=y();if(null==v?void 0:v[0]){const o=v[0];!m&&o&&i(o)}else for(const[s,c]of Object.entries(p))if(!u[s])for(const o of c)o&&C(s,o)&&a(s,o);return c((()=>{b(o).then((o=>{var e,i,a;l(o),n(null!=(e=null==o?void 0:o.reduce(((o,l)=>{var e;return null==(e=null==l?void 0:l.coloredParts)||e.forEach((l=>{var e;if(l.color){let n=null!=(e=o[l.name])?e:[];l.color.name&&!n.includes(l.color.name)&&n.push(l.color.name),o[l.name]=n}})),o}),{}))?e:{}),t(null!=(i=null==o?void 0:o.reduce(((o,l)=>{var e,n,t;return(null==l?void 0:l.combinedColor)&&(null==(e=null==l?void 0:l.combinedColor)?void 0:e.name)&&!o[null==(n=null==l?void 0:l.combinedColor)?void 0:n.name]?o[null==(t=null==l?void 0:l.combinedColor)?void 0:t.name]=null==l?void 0:l.combinedColor:l.coloredParts.forEach((l=>{var e,n,t;(null==(e=l.color)?void 0:e.name)&&!o[null==(n=l.color)?void 0:n.name]&&(o[null==(t=null==l?void 0:l.color)?void 0:t.name]=l.color)})),o}),{}))?i:{}),r(null!=(a=null==o?void 0:o.reduce(((o,l)=>{var e;return(null==(e=null==l?void 0:l.combinedColor)?void 0:e.name)&&!o.includes(l.combinedColor.name)&&o.push(l.combinedColor.name),o}),[]))?a:{})})).catch(e)}),[o]),s("div",null,s(d?x:j,null))};var E=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ProductColors:({product:o})=>s(P,null,s(O,{product:o}))});null==window||window.addEventListener("load",(()=>{document.querySelectorAll("[data-component]").forEach((o=>{const l=o.getAttribute("data-component"),e=o.getAttributeNames().reduce(((l,e)=>{if(e&&"data-component"!==e){const n=o.getAttribute(e);n&&(l[e]=n)}return l}),{});if(l){const n=E[l];n&&v(s(n,r({},e)),o)}}))}));
