var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,a=(e,t)=>{for(var n in t||(t={}))r.call(t,n)&&i(e,n,t[n]);if(o)for(var n of o(t))s.call(t,n)&&i(e,n,t[n]);return e},c=(e,o)=>t(e,n(o)),d=(e,t)=>{var n={};for(var i in e)r.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&o)for(var i of o(e))t.indexOf(i)<0&&s.call(e,i)&&(n[i]=e[i]);return n};import{W as u,C as l,c as h,l as m,u as p,y as v,d as y,A as g,a as b,v as f,I as S,S as O,b as j,e as C,f as _,V as P,g as I,h as k,i as w,L as A,E as D,j as N,B as T,k as x,H as L,T as M,m as G,n as E,o as q,p as R,q as U,r as $,s as z,t as B,w as W,x as F,z as Q,D as V,F as K,G as H,J,K as X,M as Y,N as Z,O as ee,P as te,Q as ne,R as oe,U as re,X as se,Y as ie,Z as ae,_ as ce,$ as de,a0 as ue,a1 as le,a2 as he,a3 as me,a4 as pe,a5 as ve,a6 as ye,a7 as ge,a8 as be,a9 as fe,aa as Se,ab as Oe,ac as je,ad as Ce,ae as _e,af as Pe,ag as Ie,ah as ke,ai as we}from"./vendor.js";var Ae=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{c(o.next(e))}catch(t){s(t)}}function a(e){try{c(o.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};class De{constructor(e,t){this.list=e=>this.wc.get(this.route,e).then((e=>e.data)),this.create=e=>this.wc.post(this.route,e).then((e=>e.data)),this.retrieve=e=>this.wc.get(`${this.route}/${e}`).then((e=>e.data)),this.put=(e,t)=>this.wc.put(`${this.route}/${e}`,t).then((e=>e.data)),this.update=(e,t)=>this.wc.put(`${this.route}/${e}`,t).then((e=>e.data)),this.delete=(e,t=!1)=>this.wc.delete(`${this.route}/${e}`,{force:t}).then((e=>e.data)),this.batch=e=>this.wc.post(`${this.route}/batch`,e).then((e=>e.data)),this.getAll=e=>Ae(this,void 0,void 0,(function*(){let t=!0;const n=[];for(e.per_page=100,e.page=1;!0===t;)try{const o=yield this.list(e);o.length<100?t=!1:e.page+=1,n.push(...o)}catch(o){return Promise.reject(o)}return Promise.resolve(n)})),this.wc=e,this.route=t}}const Ne=(e,t)=>new De(e,t),Te=(e,t,n,o,r,s)=>(...i)=>Ae(void 0,void 0,void 0,(function*(){let a;const c=o?o(...i):i;try{s&&(a=yield s(...c)),void 0===a&&(a=yield e(...c)),a=yield t(a)}catch(d){n&&n(d)}finally{r&&r(a)}return a})),xe=e=>Array.isArray(e)?e:[e],Le=()=>(e,t,n="id")=>{var o,r,s,i,a,c;const d=e=>(j[e[n]]=e,e),u=e=>e.map(d),l=e=>{const t=e;return u(xe(e)),t},h=e=>(delete j[e[n]],e),m=e=>e.map(h),p=e=>m(xe(e)),v=null!==(o=t.list)&&void 0!==o?o:"list";var y;e[v]&&(e[v]=(y=Te(e[v],l),((...e)=>{const t=e[0],n=j[t];return t&&n?n:y(...e)}).bind(y)));const g=null!==(r=t.get)&&void 0!==r?r:"get";e[v]&&(e[g]=Te(e[g],l,void 0,void 0,void 0,(e=>{const t=j[e];if(t)return t})));const b=null!==(s=t.create)&&void 0!==s?s:"create";e[b]&&(e[b]=Te(e[b],l));const f=null!==(i=t.update)&&void 0!==i?i:"update";e[f]&&(e[f]=Te(e[f],l));const S=null!==(a=t.patch)&&void 0!==a?a:"patch";e[S]&&(e[S]=Te(e[S],l));const O=null!==(c=t.delete)&&void 0!==c?c:"delete";e[O]&&(e[O]=Te(e[O],p));const j={};return{index:j,add:d,addMany:u,addMaybeMany:l,removeMany:m,removeMaybeMany:p}},Me=e=>Le()(e,{get:"retrieve",patch:"put"},"id");var Ge=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",crud:e=>{const t=Ne(e,"products"),n=Me(t);return Object.assign(Object.assign({},t),n)}});var Ee=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",crud:e=>{const t=Ne(e,"orders"),n=Me(t);return Object.assign(Object.assign({},t),n)}});var qe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",crud:e=>{const t=Ne(e,"customers"),n=Me(t);return Object.assign(Object.assign({},t),n)}}),Re=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Product:Ge,Order:Ee,Customer:qe});const Ue=e=>{return t=(({key:e,secret:t,url:n})=>new u({url:n,consumerKey:e,consumerSecret:t,version:"wc/v3"}))(e.access),Object.entries(Re).reduce(((e,[n,o])=>(e[n]=Object.assign(Object.assign({},o),{crud:o.crud(t)}),e)),{});var t};var $e=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{c(o.next(e))}catch(t){s(t)}}function a(e){try{c(o.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};const ze=e=>(t,n,o)=>e.get("/RBXItemSearch",{params:{name:t,dept:n,cat:o}}),Be=(e,t)=>ze(e)(t,void 0,void 0).then((e=>e.data)),We=(e,t)=>n=>ze(e)(t,n,void 0).then((e=>e.data)),Fe=(e,t)=>(n,o)=>ze(e)(t,n,o).then((e=>e.data)),Qe=e=>t=>e.post("https://www.rbrsswebservices.com/api/RBXSalesOrder",t).then((e=>e.data)),Ve=e=>{const t=e.name,n=(e=>l.create({headers:{"Content-Type":"application/json",APIKey:e.APIKey,CompanyID:e.CompanyID},baseURL:"https://www.rbrsswebservices.com/api"}))(e);return{itemSearch:ze(n),getDepartments:Be.bind(null,n,t),getCategories:We(n,t),getProducts:Fe(n,t),postOrder:Qe(n)}};var Ke=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{c(o.next(e))}catch(t){s(t)}}function a(e){try{c(o.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};const He=e=>({AddrLine1:e.address_1,AddrLine2:e.address_2,City:e.city,PostCode:e.postcode,StateProv:e.state}),Je=(e,t,n)=>t=>Ke(void 0,void 0,void 0,(function*(){const{Payments:o,CCAuth:r}=yield(s=n,e=>$e(void 0,void 0,void 0,(function*(){const t=e.transaction_id;if(!t)return Promise.reject(new TypeError("No transaction ID in order"));if(!["authorize_net_cim_credit_card","yith_wcauthnet_credit_card_gateway"].includes(e.payment_method))return Promise.reject(new TypeError("Payment method not supported"));const n=yield s.getTransactionDetails(t);return{CCAuth:n.transaction.authCode,Payments:[{PaymentType:"Credit Card",CCExp:n.transaction.payment.creditCard.expirationDate.replace("/",""),CCHolder:n.transaction.billTo.firstName+" "+n.transaction.billTo.lastName,CCType:n.transaction.payment.creditCard.cardType,CCNum:n.transaction.payment.creditCard.cardNumber.replaceAll("X",""),PmtAmt:parseFloat(n.transaction.requestedAmount)}]}})))(t);var s;const i={BillTo:He(t.billing),ShipTo:He(t.shipping),OrderItems:t.line_items.map((e=>({Product:e.name,Sku:e.sku,Qty:e.quantity,Price:parseFloat(e.total)}))),TransactionType:"Ecommerce Order",Comments:t.customer_note,OrderID:t.id.toString(),Discount:parseFloat(t.discount_total),Shipping:parseFloat(t.shipping_total),Subtotal:parseFloat(t.line_items.reduce(((e,t)=>e+(parseFloat(t.subtotal)||0)),0)),TotalPrice:parseFloat(t.total),Data1:"",Date:t.date_created,Phone:t.billing.phone,Mobile:t.billing.phone,FirstName:t.billing.first_name,LastName:t.billing.last_name,Email:t.billing.email,Payments:o,CCAuth:r};return e.postOrder(i)})),Xe=e=>({name:h(e.Description),sku:e.ID.toString(),categories:[{name:h(e.Category)},{name:h(e.Department)}],short_description:e.Description,description:e.LongDescription,regular_price:e.Price.toString(),sale_price:e.SalePrice.toString(),date_on_sale_from:e.SaleStart,date_on_sale_to:e.SaleEnd,stock_quantity:e.Quantity}),Ye=e=>t=>e.post("/rb/wc-order",t),Ze=e=>({postWCOrder:Ye(e)}),et=e=>e.get("/main/get-services").then((e=>e.data)),tt=e=>{return t=(({gsgToken:e,clientID:t})=>l.create({headers:{Authorization:`Bearer ${e}`},baseURL:"https://us-central1-get-smart-functions.cloudfunctions.net",params:{client:t}}))(e),{rb:Ze(t),getServices:et.bind(null,t)};var t},nt="https://gsg-heroku-proxy.herokuapp.com/https://cloud3.evosus.com/api".replace(/\/+$/,"");class ot{constructor(e,t=nt,n=l){this.basePath=t,this.axios=n,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}}class rt extends Error{constructor(e,t){super(t),this.field=e,this.name="RequiredError"}}const st="https://example.com",it=function(e,t,n){if(null==n)throw new rt(t,`Required parameter ${t} was null or undefined when calling ${e}.`)},at=function(e,...t){const n=new URLSearchParams(e.search);for(const o of t)for(const e in o)if(Array.isArray(o[e])){n.delete(e);for(const t of o[e])n.append(e,t)}else n.set(e,o[e]);e.search=n.toString()},ct=function(e,t,n){const o="string"!=typeof e;return(o&&n&&n.isJsonMime?n.isJsonMime(t.headers["Content-Type"]):o)?JSON.stringify(void 0!==e?e:{}):e||""},dt=function(e){return e.pathname+e.search+e.hash},ut=function(e,t,n,o){return(r=t,s=n)=>{const i=Object.assign(Object.assign({},e.options),{url:((null==o?void 0:o.basePath)||s)+e.url});return r.request(i)}};var lt=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{c(o.next(e))}catch(t){s(t)}}function a(e){try{c(o.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};const ht=function(e){const t=function(e){return{customerAdd:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerAdd","companySN",t),it("customerAdd","ticket",n),it("customerAdd","body",o);const s=new URL("/method/Customer_Add",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerAddressGet:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerAddressGet","companySN",t),it("customerAddressGet","ticket",n),it("customerAddressGet","body",o);const s=new URL("/method/Customer_Addresses_Get",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerCreditMemoApply:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerCreditMemoApply","companySN",t),it("customerCreditMemoApply","ticket",n),it("customerCreditMemoApply","body",o);const s=new URL("/method/Customer_CreditMemo_Apply",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerCreditMemosOpenGet:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerCreditMemosOpenGet","companySN",t),it("customerCreditMemosOpenGet","ticket",n),it("customerCreditMemosOpenGet","body",o);const s=new URL("/method/Customer_CreditMemos_Open_Get",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerEquipmentAdd:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerEquipmentAdd","companySN",t),it("customerEquipmentAdd","ticket",n),it("customerEquipmentAdd","body",o);const s=new URL("/method/Customer_Equipment_Add",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerEquipmentGet:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerEquipmentGet","companySN",t),it("customerEquipmentGet","ticket",n),it("customerEquipmentGet","body",o);const s=new URL("/method/Customer_Equipment_Get",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerInvoiceDetailSearch:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerInvoiceDetailSearch","companySN",t),it("customerInvoiceDetailSearch","ticket",n),it("customerInvoiceDetailSearch","body",o);const s=new URL("/method/Customer_InvoiceDetail_Search",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerInvoiceSearch:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerInvoiceSearch","companySN",t),it("customerInvoiceSearch","ticket",n),it("customerInvoiceSearch","body",o);const s=new URL("/method/Customer_Invoice_Search",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerLeadSearch:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerLeadSearch","companySN",t),it("customerLeadSearch","ticket",n),it("customerLeadSearch","body",o);const s=new URL("/method/Customer_Lead_Search",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerLeadStatusCheck:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerLeadStatusCheck","companySN",t),it("customerLeadStatusCheck","ticket",n),it("customerLeadStatusCheck","body",o);const s=new URL("/method/Customer_Lead_Status_Check",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerNoteAdd:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerNoteAdd","companySN",t),it("customerNoteAdd","ticket",n),it("customerNoteAdd","body",o);const s=new URL("/method/Customer_Note_Add",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerNotesGet:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerNotesGet","companySN",t),it("customerNotesGet","ticket",n),it("customerNotesGet","body",o);const s=new URL("/method/Customer_Notes_Get",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerOrderAdd:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerOrderAdd","companySN",t),it("customerOrderAdd","ticket",n),it("customerOrderAdd","body",o);const s=new URL("/method/Customer_Order_Add",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerOrderLineItemCalculate:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerOrderLineItemCalculate","companySN",t),it("customerOrderLineItemCalculate","ticket",n),it("customerOrderLineItemCalculate","body",o);const s=new URL("/method/Customer_Order_LineItem_Calculate",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerOrderServiceInteviewSearch:(t,n,o={})=>lt(this,void 0,void 0,(function*(){it("customerOrderServiceInteviewSearch","companySN",t),it("customerOrderServiceInteviewSearch","ticket",n);const r=new URL("/method/Customer_Order_ServiceInterview_Search",st);let s;e&&(s=e.baseOptions);const i=Object.assign(Object.assign({method:"POST"},s),o),a={};void 0!==t&&(a.CompanySN=t),void 0!==n&&(a.ticket=n),at(r,a,o.query);let c=s&&s.headers?s.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},{}),c),o.headers),{url:dt(r),options:i}})),customerPaymentAdd:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerPaymentAdd","companySN",t),it("customerPaymentAdd","ticket",n),it("customerPaymentAdd","body",o);const s=new URL("/method/Customer_Payment_Add",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerPaymentMethodSearch:(t,n,o={})=>lt(this,void 0,void 0,(function*(){it("customerPaymentMethodSearch","companySN",t),it("customerPaymentMethodSearch","ticket",n);const r=new URL("/method/Customer_PaymentMethod_Search",st);let s;e&&(s=e.baseOptions);const i=Object.assign(Object.assign({method:"POST"},s),o),a={};void 0!==t&&(a.CompanySN=t),void 0!==n&&(a.ticket=n),at(r,a,o.query);let c=s&&s.headers?s.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},{}),c),o.headers),{url:dt(r),options:i}})),customerScheduleSearch:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerScheduleSearch","companySN",t),it("customerScheduleSearch","ticket",n),it("customerScheduleSearch","body",o);const s=new URL("/method/Customer_Schedule_Search",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerSearch:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerSearch","companySN",t),it("customerSearch","ticket",n),it("customerSearch","body",o);const s=new URL("/method/Customer_Search",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerSiteProfileGet:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerSiteProfileGet","companySN",t),it("customerSiteProfileGet","ticket",n),it("customerSiteProfileGet","body",o);const s=new URL("/method/Customer_SiteProfile_Get",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerStatement:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerStatement","companySN",t),it("customerStatement","ticket",n),it("customerStatement","body",o);const s=new URL("/method/Customer_Statement_Get",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),customerUpdate:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("customerUpdate","companySN",t),it("customerUpdate","ticket",n),it("customerUpdate","body",o);const s=new URL("/method/Customer_Update",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}}))}}(e);return{customerAdd(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerAdd(n,o,r,s);return ut(i,l,nt,e)}))},customerAddressGet(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerAddressGet(n,o,r,s);return ut(i,l,nt,e)}))},customerCreditMemoApply(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerCreditMemoApply(n,o,r,s);return ut(i,l,nt,e)}))},customerCreditMemosOpenGet(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerCreditMemosOpenGet(n,o,r,s);return ut(i,l,nt,e)}))},customerEquipmentAdd(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerEquipmentAdd(n,o,r,s);return ut(i,l,nt,e)}))},customerEquipmentGet(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerEquipmentGet(n,o,r,s);return ut(i,l,nt,e)}))},customerInvoiceDetailSearch(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerInvoiceDetailSearch(n,o,r,s);return ut(i,l,nt,e)}))},customerInvoiceSearch(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerInvoiceSearch(n,o,r,s);return ut(i,l,nt,e)}))},customerLeadSearch(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerLeadSearch(n,o,r,s);return ut(i,l,nt,e)}))},customerLeadStatusCheck(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerLeadStatusCheck(n,o,r,s);return ut(i,l,nt,e)}))},customerNoteAdd(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerNoteAdd(n,o,r,s);return ut(i,l,nt,e)}))},customerNotesGet(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerNotesGet(n,o,r,s);return ut(i,l,nt,e)}))},customerOrderAdd(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerOrderAdd(n,o,r,s);return ut(i,l,nt,e)}))},customerOrderLineItemCalculate(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerOrderLineItemCalculate(n,o,r,s);return ut(i,l,nt,e)}))},customerOrderServiceInteviewSearch(n,o,r){return lt(this,void 0,void 0,(function*(){const s=yield t.customerOrderServiceInteviewSearch(n,o,r);return ut(s,l,nt,e)}))},customerPaymentAdd(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerPaymentAdd(n,o,r,s);return ut(i,l,nt,e)}))},customerPaymentMethodSearch(n,o,r){return lt(this,void 0,void 0,(function*(){const s=yield t.customerPaymentMethodSearch(n,o,r);return ut(s,l,nt,e)}))},customerScheduleSearch(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerScheduleSearch(n,o,r,s);return ut(i,l,nt,e)}))},customerSearch(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerSearch(n,o,r,s);return ut(i,l,nt,e)}))},customerSiteProfileGet(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerSiteProfileGet(n,o,r,s);return ut(i,l,nt,e)}))},customerStatement(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerStatement(n,o,r,s);return ut(i,l,nt,e)}))},customerUpdate(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.customerUpdate(n,o,r,s);return ut(i,l,nt,e)}))}}};class mt extends ot{customerAdd(e,t,n,o){return ht(this.configuration).customerAdd(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerAddressGet(e,t,n,o){return ht(this.configuration).customerAddressGet(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerCreditMemoApply(e,t,n,o){return ht(this.configuration).customerCreditMemoApply(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerCreditMemosOpenGet(e,t,n,o){return ht(this.configuration).customerCreditMemosOpenGet(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerEquipmentAdd(e,t,n,o){return ht(this.configuration).customerEquipmentAdd(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerEquipmentGet(e,t,n,o){return ht(this.configuration).customerEquipmentGet(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerInvoiceDetailSearch(e,t,n,o){return ht(this.configuration).customerInvoiceDetailSearch(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerInvoiceSearch(e,t,n,o){return ht(this.configuration).customerInvoiceSearch(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerLeadSearch(e,t,n,o){return ht(this.configuration).customerLeadSearch(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerLeadStatusCheck(e,t,n,o){return ht(this.configuration).customerLeadStatusCheck(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerNoteAdd(e,t,n,o){return ht(this.configuration).customerNoteAdd(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerNotesGet(e,t,n,o){return ht(this.configuration).customerNotesGet(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerOrderAdd(e,t,n,o){return ht(this.configuration).customerOrderAdd(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerOrderLineItemCalculate(e,t,n,o){return ht(this.configuration).customerOrderLineItemCalculate(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerOrderServiceInteviewSearch(e,t,n){return ht(this.configuration).customerOrderServiceInteviewSearch(e,t,n).then((e=>e(this.axios,this.basePath)))}customerPaymentAdd(e,t,n,o){return ht(this.configuration).customerPaymentAdd(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerPaymentMethodSearch(e,t,n){return ht(this.configuration).customerPaymentMethodSearch(e,t,n).then((e=>e(this.axios,this.basePath)))}customerScheduleSearch(e,t,n,o){return ht(this.configuration).customerScheduleSearch(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerSearch(e,t,n,o){return ht(this.configuration).customerSearch(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerSiteProfileGet(e,t,n,o){return ht(this.configuration).customerSiteProfileGet(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerStatement(e,t,n,o){return ht(this.configuration).customerStatement(e,t,n,o).then((e=>e(this.axios,this.basePath)))}customerUpdate(e,t,n,o){return ht(this.configuration).customerUpdate(e,t,n,o).then((e=>e(this.axios,this.basePath)))}}const pt=function(e){const t=function(e){return{inventoryDistributionMethodSearch:(t,n,o={})=>lt(this,void 0,void 0,(function*(){it("inventoryDistributionMethodSearch","companySN",t),it("inventoryDistributionMethodSearch","ticket",n);const r=new URL("/method/Inventory_DistributionMethod_Search",st);let s;e&&(s=e.baseOptions);const i=Object.assign(Object.assign({method:"POST"},s),o),a={};void 0!==t&&(a.CompanySN=t),void 0!==n&&(a.ticket=n),at(r,a,o.query);let c=s&&s.headers?s.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},{}),c),o.headers),{url:dt(r),options:i}})),inventoryItemGet:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("inventoryItemGet","companySN",t),it("inventoryItemGet","ticket",n),it("inventoryItemGet","body",o);const s=new URL("/method/Inventory_Item_Get",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),inventoryItemSearch:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("inventoryItemSearch","companySN",t),it("inventoryItemSearch","ticket",n),it("inventoryItemSearch","body",o);const s=new URL("/method/Inventory_Item_Search",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),inventoryItemStockSiteQuantityGet:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("inventoryItemStockSiteQuantityGet","companySN",t),it("inventoryItemStockSiteQuantityGet","ticket",n);const s=new URL("/method/Inventory_Item_StockSiteQuantity_Get",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}})),inventoryProductLineSearch:(t,n,o={})=>lt(this,void 0,void 0,(function*(){it("inventoryProductLineSearch","companySN",t),it("inventoryProductLineSearch","ticket",n);const r=new URL("/method/Inventory_ProductLine_Search",st);let s;e&&(s=e.baseOptions);const i=Object.assign(Object.assign({method:"POST"},s),o),a={};void 0!==t&&(a.CompanySN=t),void 0!==n&&(a.ticket=n),at(r,a,o.query);let c=s&&s.headers?s.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},{}),c),o.headers),{url:dt(r),options:i}})),inventoryVendorSearch:(t,n,o,r={})=>lt(this,void 0,void 0,(function*(){it("inventoryVendorSearch","companySN",t),it("inventoryVendorSearch","ticket",n),it("inventoryVendorSearch","body",o);const s=new URL("/method/Inventory_Vendor_Search",st);let i;e&&(i=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},i),r),c={},d={};void 0!==t&&(d.CompanySN=t),void 0!==n&&(d.ticket=n),c["Content-Type"]="application/json",at(s,d,r.query);let u=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),a.data=ct(o,a,e),{url:dt(s),options:a}}))}}(e);return{inventoryDistributionMethodSearch(n,o,r){return lt(this,void 0,void 0,(function*(){const s=yield t.inventoryDistributionMethodSearch(n,o,r);return ut(s,l,nt,e)}))},inventoryItemGet(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.inventoryItemGet(n,o,r,s);return ut(i,l,nt,e)}))},inventoryItemSearch(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.inventoryItemSearch(n,o,r,s);return ut(i,l,nt,e)}))},inventoryItemStockSiteQuantityGet(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.inventoryItemStockSiteQuantityGet(n,o,r,s);return ut(i,l,nt,e)}))},inventoryProductLineSearch(n,o,r){return lt(this,void 0,void 0,(function*(){const s=yield t.inventoryProductLineSearch(n,o,r);return ut(s,l,nt,e)}))},inventoryVendorSearch(n,o,r,s){return lt(this,void 0,void 0,(function*(){const i=yield t.inventoryVendorSearch(n,o,r,s);return ut(i,l,nt,e)}))}}};class vt extends ot{inventoryDistributionMethodSearch(e,t,n){return pt(this.configuration).inventoryDistributionMethodSearch(e,t,n).then((e=>e(this.axios,this.basePath)))}inventoryItemGet(e,t,n,o){return pt(this.configuration).inventoryItemGet(e,t,n,o).then((e=>e(this.axios,this.basePath)))}inventoryItemSearch(e,t,n,o){return pt(this.configuration).inventoryItemSearch(e,t,n,o).then((e=>e(this.axios,this.basePath)))}inventoryItemStockSiteQuantityGet(e,t,n,o){return pt(this.configuration).inventoryItemStockSiteQuantityGet(e,t,n,o).then((e=>e(this.axios,this.basePath)))}inventoryProductLineSearch(e,t,n){return pt(this.configuration).inventoryProductLineSearch(e,t,n).then((e=>e(this.axios,this.basePath)))}inventoryVendorSearch(e,t,n,o){return pt(this.configuration).inventoryVendorSearch(e,t,n,o).then((e=>e(this.axios,this.basePath)))}}const yt=(e,t)=>Array.from(Array(Math.ceil(e.length/t)).keys()).map((n=>e.slice(n*t,n*t+t)));var gt=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{c(o.next(e))}catch(t){s(t)}}function a(e){try{c(o.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};const bt=e=>{const t=e.data.response;if("ER"===e.data.code)throw new Error(e.data.message);if(!t)throw new Error("Invalid Evosus response");return t},ft=e=>{var t,n,o;const r=null!==(o=null===(n=null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.data)||void 0===n?void 0:n.message)&&void 0!==o?o:e.message;throw new Error(r)},St=({access:{companySN:e,ticket:t}})=>{const n=new vt,o=new mt;return{inventoryApi:{inventoryItemSearch:o=>n.inventoryItemSearch(e,t,{args:o}).then(bt).catch(ft),inventoryProductLineSearch:()=>n.inventoryProductLineSearch(e,t).then(bt).catch(ft)},customersApi:{customerOrderAdd:n=>o.customerOrderAdd(e,t,{args:n}).then(bt).catch(ft),customerAdd:n=>o.customerAdd(e,t,{args:n}).then(bt).catch(ft),customerAddressGet:n=>o.customerAddressGet(e,t,{args:n}).then(bt).catch(ft),customerSearch:n=>o.customerSearch(e,t,{args:n}).then(bt).catch(ft),customerPaymentAdd:n=>o.customerPaymentAdd(e,t,{args:n}).then(bt).catch(ft)}}},Ot=e=>e.reduce(((e,t)=>(t.sku&&(e[t.sku]=t),e)),{}),jt=e=>e.map((e=>e.Code)),Ct=(e,t,n)=>t.inventoryApi.inventoryItemSearch(n).then((t=>e.Product.crud.getAll({sku:jt(t).filter((e=>e)).join(",")}).then((e=>({wcProducts:e,evosusProducts:t}))))),_t=(e,t,n)=>gt(void 0,void 0,void 0,(function*(){return Ct(e,t,n).then((({wcProducts:e,evosusProducts:t})=>{const n=Ot(e);return t.reduce(((e,t)=>{var o,r,s,i;if(t.Code){const a=n[t.Code];if(a){const n={id:a.id,sku:a.sku};n.name=t.Description,n.manage_stock=!0,n.stock_quantity=t.QuantityAvailable,n.regular_price=null===(o=t.Retail)||void 0===o?void 0:o.toString().replace("$",""),n.weight=t.Weight,null===(r=e.update)||void 0===r||r.push(n)}else null===(s=e.create)||void 0===s||s.push({name:t.Description,sku:t.Code,stock_quantity:t.QuantityAvailable,price:null===(i=t.Retail)||void 0===i?void 0:i.toString().replace("$",""),weight:t.Weight})}return e}),{create:[],update:[]})}))})),Pt=(e,t,n)=>gt(void 0,void 0,void 0,(function*(){var o,r,s;const i={BillTo_Address1:n.billing.address_1+" "+n.billing.address_2,BillTo_City:n.billing.city,BillTo_ContactName:n.billing.first_name+" "+n.billing.last_name,BillTo_Country:n.billing.country,BillTo_PostCode:n.billing.postcode,BillTo_StateAbbr:n.billing.state,EmailAddress1:n.email,EmailAddress2:n.billing.email,Name_Company:n.billing.company,Name_First:n.first_name,Name_Last:n.last_name,ShipTo_Address1:n.shipping.address_1,ShipTo_Address2:n.shipping.address_2,ShipTo_City:n.shipping.city,ShipTo_ContactName:n.shipping.first_name+" "+n.shipping.last_name,ShipTo_Country:n.shipping.country,ShipTo_PostCode:n.shipping.postcode,ShipTo_StateAbbr:n.shipping.state},a=null!==(s=null===(r=null===(o=n.meta_data)||void 0===o?void 0:o.find((({key:e})=>"evosusMetadata"===e)))||void 0===r?void 0:r.value)&&void 0!==s?s:{};Object.assign(i,a);const c=yield e.customersApi.customerAdd(i);return yield t.Customer.crud.put(n.id,{meta_data:[{key:"evosusId",value:c}]}),c})),It=(e,t)=>gt(void 0,void 0,void 0,(function*(){var n,o,r;const s={EmailAddress_List:t.email},i=null===(o=null===(n=t.meta_data)||void 0===n?void 0:n.find((({key:e})=>"evosusId"===e)))||void 0===o?void 0:o.value;i&&(s.Customer_ID=parseInt(i));const a=yield e.customersApi.customerSearch(s);return null!==(r=null==a?void 0:a[0])&&void 0!==r?r:null})),kt=(e,t,n)=>gt(void 0,void 0,void 0,(function*(){const o=yield It(e,n);if(o)return o;const r=yield Pt(e,t,n);return e.customersApi.customerSearch({Customer_ID:parseInt(r)}).then((e=>{const t=e[0];if(!t)throw new Error("Failed to retrieve created evosus customer");return t}))})),wt=(e,t)=>(n,o)=>gt(void 0,void 0,void 0,(function*(){var r,s,i,a,c;const d=n.customer_id;if(!d)throw new Error("No customer_id found on the Order");const u=yield t.Customer.crud.retrieve(d);if(!u)throw new Error("Failed to retrieve Order customer");const l=(yield kt(e,t,u)).CustomerID;if(!l)throw new Error("Invalid evosus customer ID");const h=yield e.customersApi.customerAddressGet({Customer_ID:l}),m=null==h?void 0:h.find((e=>"Yes"===e.IsDefaultBillTo)),p=null==m?void 0:m.CustomerLocationID;if(!p)throw new Error("No default billing address for customer");const v=null==h?void 0:h.find((e=>"Yes"===e.IsDefaultShipTo)),y=null!==(a=(null!==(i=null===(s=null===(r=n.meta_data)||void 0===r?void 0:r.find((({key:e})=>"evosusMetadata"===e)))||void 0===s?void 0:s.value)&&void 0!==i?i:{}).DistributionMethodID)&&void 0!==a?a:null==o?void 0:o.DistributionMethodID;if(!y)throw new Error("Distribution method ID is required");return e.customersApi.customerOrderAdd({Customer_ID:l.toString(),BillTo_CustomerLocationID:p,ShipTo_CustomerLocationID:null!==(c=null==v?void 0:v.CustomerLocationID)&&void 0!==c?c:"",DistributionMethodID:y,ExpectedOrderTotal:n.total,Internal_Note:"",LineItems:n.line_items.map((e=>({ItemCode:e.sku,Comment:"",Quantity:e.quantity}))),Order_Note:n.customer_note})})),At=(e,t)=>(n,o)=>gt(void 0,void 0,void 0,(function*(){var r,s,i,a,c,d;const u=null===(r=n.meta_data.find((({key:e})=>"evosusId"===e)))||void 0===r?void 0:r.value;if(!u)throw new Error("No evosus order ID found on woocommerce order metadata, post the order the evosus before applying payment");const l=yield t.Customer.crud.retrieve(n.customer_id);if(!l)throw new Error("Failed to retrieve order's customer");if(!l)throw new Error("Failed to retrieve order's customer");let h=null===(s=l.meta_data.find((({key:e})=>"evosusId"===e)))||void 0===s?void 0:s.value;if(h||(h=null===(a=null===(i=yield kt(e,t,l))||void 0===i?void 0:i.CustomerID)||void 0===a?void 0:a.toString()),!h)throw new Error("Failed to retrieve order's customer evosus ID");const m=(null===(d=null===(c=n.meta_data)||void 0===c?void 0:c.find((({key:e})=>"EvosusPaymentMethodId"===e)))||void 0===d?void 0:d.value)||(null==o?void 0:o.paymentMethodId);if(!m)throw new Error("No payment method ID");return e.customersApi.customerPaymentAdd({Amount:parseFloat(n.total),Customer_ID:parseInt(h),PaymentMethodID:m,OrderID:u,NoteText:n.customer_note})}));var Dt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",instance:St,mapEvosusProductsSkus:jt,getWooCommerceProductsInEvosusProductsSearch:Ct,searchAndImportToWooCommerce:(e,t,n)=>gt(void 0,void 0,void 0,(function*(){return Ct(e,t,n).then((({wcProducts:t,evosusProducts:n})=>{const o=Ot(t),r=n.reduce(((e,t)=>{var n,r,s,i;if(t.Code){const a=o[t.Code];if(a){const o={id:a.id};o.name=t.Description,o.manage_stock=!0,o.stock_quantity=t.QuantityAvailable,o.regular_price=null===(n=t.Retail)||void 0===n?void 0:n.toString().replace("$",""),o.weight=t.Weight,null===(r=e.update)||void 0===r||r.push(o)}else null===(s=e.create)||void 0===s||s.push({name:t.Description,sku:t.Code,stock_quantity:t.QuantityAvailable,price:null===(i=t.Retail)||void 0===i?void 0:i.toString(),weight:t.Weight})}return e}),{create:[],update:[]});return yt(r.create,100).map((t=>e.Product.crud.batch({create:t}).then((e=>({status:"created",products:e.create}))))).concat(yt(r.update,100).map((t=>e.Product.crud.batch({update:t}).then((e=>({status:"updated",products:e.update}))))))}))})),searchProductsToSyncToWooCommerce:_t,createEvosusCustomerFromWcCustomer:Pt,findEvosusCustomerFromWcCustomer:It,findOrCreateCustomerFromWcCustomer:kt,postWCOrder:wt,applyPaymentToWCOrder:At,default:St});const Nt=(e,t=[])=>{const[n,o]=m(null),[r,s]=m(null),[i,a]=p(!0);return v((()=>{o(null),s(null),a.on(),e&&e().then(o).catch(s).finally(a.off)}),t),{resolved:n,rejected:r,loading:i}},Tt=e=>{const[t,n]=m((()=>({array:e})));return y((()=>{const e=e=>n({array:e});return{set:e,push:n=>e([...t.array,n]),setAt:(n,o)=>{const r=[...t.array];r[n]=o,e(r)},concat:n=>e([...t.array,...n]),remove:n=>e(t.array.filter((e=>e!==n))),array:t.array}}),[t.array])},xt=e=>{if("object"==typeof e&&null!==e){if("function"==typeof Object.getPrototypeOf){const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}return"[object Object]"===Object.prototype.toString.call(e)}return!1},Lt=(...e)=>e.reduce(((e,t)=>(Object.keys(t).forEach((n=>{Array.isArray(e[n])&&Array.isArray(t[n])?e[n]=Array.from(new Set(e[n].concat(t[n]))):xt(e[n])&&xt(t[n])?e[n]=Lt(e[n],t[n]):e[n]=t[n]})),e)),{}),Mt=({nonce:e,siteurl:t,cookieHash:n,cookieValue:o,gsgToken:r})=>{const s=y((()=>(({nonce:e,siteurl:t,cookieHash:n,cookieValue:o,gsgToken:r})=>{!r&&n&&o&&w.set(n,o);const s={"content-type":"application/json"};return r?s.Authorization=`Bearer ${r}`:s["X-WP-Nonce"]=e,{get:()=>fetch(`${t}/wp-json/gsg/v1/options`,{headers:s,credentials:"include"}).then((e=>e.json())),set:e=>fetch(`${t}/wp-json/gsg/v1/options`,{headers:s,credentials:"include",method:"POST",body:JSON.stringify(e)}).then((e=>e.json()))}})({nonce:e,siteurl:t,cookieHash:n,cookieValue:o,gsgToken:r})),[e,t,n,o,r]),[i,c]=p(!1),[d,u]=p(!0),[l,h]=m({gsc:{options:{access:{clientID:"",gsgToken:""}}},wc:{options:{access:{key:"",secret:"",url:""}}},evosus:{options:{access:{companySN:"",ticket:""}},defaultDistributionID:"",defaultPaymentID:""},rb:{options:{access:{CompanyID:"",APIKey:"",name:""}}},an:{options:{credentials:{name:"",refId:"",transactionKey:""},testMode:!0}}});return v((()=>{u.on(),s.get().then((e=>{var t,n,o,r;if(void 0!==(null==(r=null==(o=null==(n=null==(t=null==e?void 0:e.gsc)?void 0:t.options)?void 0:n.access)?void 0:o.gsgToken)?void 0:r.length)){const t=Lt(l,e);h(a({},t))}})).finally(u.off)}),[e,t,n,o,r]),v((()=>{var e;!d&&!i&&(null==(e=l.gsc.options.access.gsgToken)?void 0:e.length)>0&&(c.on(),s.set(l).finally(c.off.bind(null)))}),[l]),{fetching:d,saving:i,options:l,setOptions:h,siteurl:new URL(t)}},[Gt,Et]=b(),qt=e=>{var t=e,{children:n}=t,o=d(t,["children"]);const r=Mt(o);return f(Gt,{value:r},n)},Rt=({obj:e,target:t,label:n,secret:o,checkbox:r})=>{var s;const{options:i,fetching:c,saving:d,setOptions:u}=Et(),l=e[t],[h,m]=p(!1);return f(k.label,null,n,r?f(S,null,f(O,{isChecked:null!=(s=e[t])&&s,isDisabled:c,onChange:n=>{const o=n.target.checked;e[t]=o,e[t]!==l&&u(a({},i))}})):f(S,null,f(j,{type:h||!o?"text":"password",disabled:c,placeholder:n,value:e[t],onChange:n=>{const o=n.target.value;e[t]=o},onBlur:()=>{e[t]!==l&&u(a({},i))}}),o?f(C,null,f(_,{"aria-label":"View Input",onClick:()=>m.toggle(),icon:f(h?P:I,null)})):null))},Ut=Et,$t=e=>({client:y((()=>{if(e)return(e=>Ve(e.access))(e)}),[e])}),[zt,Bt]=b(),Wt=e=>{var t=e,{children:n}=t,o=d(t,["children"]);const r=$t(o);return r.client?f(zt,{value:r},n):null},Ft=Bt,Qt=e=>({client:y((()=>{if(e)return(({credentials:e,testMode:t})=>{const n={"Content-Type":"application/json"},o=t?"https://apitest.authorize.net/xml/v1/request.api":"https://api.authorize.net/xml/v1/request.api",r=(t,r)=>l({url:o,method:"POST",headers:n,data:{[t]:Object.assign({merchantAuthentication:{name:e.name,transactionKey:e.transactionKey}},r)}}).then((e=>{var t,n,o,r,s,i;return"Error"===(null===(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.messages)||void 0===n?void 0:n.resultCode)?Promise.reject(new Error(null===(i=null===(s=null===(r=null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.messages)||void 0===r?void 0:r.message)||void 0===s?void 0:s.map((e=>null==e?void 0:e.text)))||void 0===i?void 0:i.join("\n"))):e.data}));return{post:r,getTransactionDetails:e=>r("getTransactionDetailsRequest",{transId:e}).then((e=>e))}})(e)}),[e])}),[Vt,Kt]=b(),Ht=e=>{var t=e,{children:n}=t,o=d(t,["children"]);const r=Qt(o);return r.client?f(Vt,{value:r},n):null},Jt=Kt,Xt=e=>({client:y((()=>{if(e)return(e=>tt(e.access))(e)}),[e])}),[Yt,Zt]=b(),en=e=>{var t=e,{children:n}=t,o=d(t,["children"]);const r=Xt(o);return r.client?f(Yt,{value:r},n):null},tn=Zt,[nn,on]=b(),rn=e=>{var t=e,{children:n}=t,o=d(t,["children"]);const r={client:y((()=>{if(s)return St(s)}),[s=o])};var s;return r.client?f(nn,{value:r},n):null},sn=on,an=e=>{var t=e,{children:n,id:o}=t,r=d(t,["children","id"]);const{siteurl:s}=Ut();return f(A,a({target:"_blank",href:s+`wp-admin/post.php?post=${o}&action=edit`},r),n,f(D,{mx:"2px"}))},cn=(e,t,n,o,r,s)=>async(...i)=>{let a;o&&o(...i);const c=i;try{s&&s(...c),a=await e(...c),t&&t(a)}catch(d){n&&n(d)}finally{r&&r(a)}return a},dn=(e,t)=>Array.from(Array(Math.ceil(e.length/t)).keys()).map((n=>e.slice(n*t,n*t+t))),[un,ln]=b(),hn=e=>{var t=e,{children:n}=t,o=d(t,["children"]);const r={client:y((()=>{if(s.access.key&&s.access.url&&s.access.secret&&s)return Ue(s)}),[s=o])};var s;return r.client?f(un,{value:r},n):null},mn=ln,pn=function(e){const[t,n]=p(!1),o=g((()=>{c(a({},e.index))}),[e]),[r,s]=m(),[i,c]=m((()=>(e.create=cn(e.create,o,s,n.on,n.off),e.delete=cn(e.delete,o,s,n.on,n.off),e.list=cn(e.list,o,s,n.on,n.off),e.put=cn(e.put,o,s,n.on,n.off),e.update=cn(e.update,o,s,n.on,n.off),e.retrieve=cn(e.retrieve,o,s,n.on,n.off),e.index))),d=y((()=>Object.values(i)),[i]);return{crud:e,loading:t,array:d,store:i,error:r}},vn=({page:e,loading:t,prev:n,next:o})=>f(L,null,f(_,{disabled:e.isAtMin,"aria-label":"Previous",onClick:n,icon:f(x,null)}),f(T,{disabled:!0},e.valueAsNumber),f(_,{disabled:e.isAtMax||t,"aria-label":"Next",onClick:o,icon:f(N,null)})),yn=e=>{var t=e,{headers:n,children:o}=t,r=d(t,["headers","children"]);const s=y((()=>n.map((e=>f(M,null,e)))),[n]);return f(q,a({whiteSpace:"nowrap",w:"100%",variant:"simple"},r),f(G,null,f(E,null,s)),f(R,null,o),f(U,null,f(E,null,s)))},[gn,bn]=b(),fn=e=>{var t=e,{name:n,index:o,value:r,onChangeIndex:s,children:i}=t,c=d(t,["name","index","value","onChangeIndex","children"]);const u=(({name:e,index:t,value:n,onChangeIndex:o})=>{const r=y((()=>null!=n?n:[]),[n]),s=Tt(r);v((()=>{s.set(s.array.filter((e=>Object.keys(t).includes(e))))}),[t]),v((()=>{n!==r&&s.set(r)}),[n]);const i=y((()=>s.array.reduce(((e,n)=>{const o=t[n];return o&&(e[n]=o),e}),{})),[s.array,t]),a=g((()=>{o&&o(i,s.array)}),[i,s.array,o,t]);return v((()=>{a()}),[s.array,i,t]),{name:e,index:t,array:s,value:n}})({name:n,index:o,value:r,onChangeIndex:s});return f(gn,{value:u},f(z,a({value:u.array.array},c),i))},Sn=e=>{var t=e,{id:n,onChange:o}=t,r=d(t,["id","onChange"]);const{name:s,index:i,array:c}=bn(),u=g((e=>{e.target.checked?c.push(n):c.remove(n),o&&o(e)}),[n,i,c]);return f($,a({name:s,onChange:u,value:n},r))},On=()=>{const{name:e,index:t,array:n}=bn(),o=y((()=>n.array.length===Object.keys(t).length?n.array[0]:"null"),[n,t]);return f($,{onChange:()=>n.set(n.array.length===Object.keys(t).length?[]:Object.keys(t)),name:e,value:o})},jn=e=>{var t=e,{name:n,index:o,value:r,headers:s,onChangeIndex:i,children:c}=t,u=d(t,["name","index","value","headers","onChangeIndex","children"]);return f(fn,{name:n,index:o,value:r,onChangeIndex:i},f(yn,a({headers:[f(On,null),...null!=s?s:[]]},u),c))},Cn=e=>{var t=e,{id:n,children:o}=t,r=d(t,["id","children"]);const{name:s}=bn();return f(E,a({key:`${s}-${n}`},r),f(W,null,f(Sn,{id:n})),o)},_n=e=>{var t=e,{children:n}=t,o=d(t,["children"]);const{name:r,index:s}=bn(),i=y((()=>Object.entries(s).map((([e,t])=>f(Cn,a({id:e},o),n(t,e))))),[n,s,r]);return f(B,null,i)},[Pn,In]=b(),kn=e=>{var t=e,{children:n,module:o}=t;const r=function({crud:e,loading:t,store:n},o){const[r,s]=m(null!=o?o:{}),i=y((()=>{var e;return null!=(e=null==r?void 0:r.page)?e:1}),[r]),d=y((()=>{var e;return null!=(e=r.per_page)?e:10}),[r]),[u,l]=m([]),[h,p]=m(void 0),b=te({min:1,max:h,defaultValue:i}),f=b.increment.bind(null,1),S=b.decrement.bind(null,1);v((()=>{l([]),p(void 0),b.setValue(1)}),[r]),v((()=>{void 0===u[b.valueAsNumber]&&O(b.valueAsNumber)}),[b.valueAsNumber,u]);const O=g((t=>{if(h&&t>h)return Promise.resolve([]);const n=[...u];return n[t]=[],l(n),e.list(c(a({},r),{page:t})).then((e=>{e.length<d&&p(t),n[t]=e.map((e=>e.id)),l([...n])}))}),[r,u,e,h]),j=g((()=>O(b.valueAsNumber)),[b.valueAsNumber,r]),C=y((()=>u[b.valueAsNumber]),[u,b.valueAsNumber]);return{crud:e,store:n,page:b,next:f,prev:S,loading:t,params:r,setParams:s,index:u,max:h,setMax:p,currentPage:C,fetchCurrentPage:j}}(o,d(t,["children","module"]));return f(Pn,{value:r},n)},wn=()=>{const{page:e,next:t,prev:n,loading:o}=In();return f(vn,{page:e,next:t,prev:n,loading:o})},An=()=>{var e;const{setParams:t,params:n,loading:o}=In(),[r,s]=m(null!=(e=n.search)?e:""),i=g((e=>(e.preventDefault(),t(c(a({},n),{search:r})),!1)),[n,r,t]);return f(S,{as:"form",onSubmit:i},f(j,{placeholder:"Search",type:"text",disabled:o,value:r,onChange:e=>s(e.target.value)}),f(C,null,f(_,{type:"submit",disabled:o,"aria-label":"Search"},f(Y,null))))},Dn=()=>{var e;const{setParams:t,params:n,loading:o}=In();return f(S,{maxW:"100px"},f(Z,{disabled:o,onBlur:e=>{e.target.value!==n.per_page&&t(c(a({},n),{per_page:e.target.value}))},value:null!=(e=n.per_page)?e:10,defaultValue:10,min:10,max:100},f(ee,null)))},Nn=e=>{var t=e,{children:n}=t,o=d(t,["children"]);const{store:r,index:s,page:i,currentPage:c}=In(),u=y((()=>null==c?void 0:c.reduce(((e,t)=>(r[t]&&(e[t]=r[t]),e)),{})),[r,s,i.valueAsNumber,c]);return f(jn,a({index:null!=u?u:{}},o),n)},Tn=e=>{var t=e,{module:n,actions:o,name:r,display:s=[],headers:i={},children:u}=t,l=d(t,["module","actions","name","display","headers","children"]);const[h,p]=m(null),v=Tt(s),[y,b]=m({}),O=Tt([]),j=Tt([]),P=(e=>{const[t,n]=m((()=>e)),o=g(((e,o)=>n(c(a({},t),{[e]:o}))),[t]),r=g((e=>{t[e]&&(delete t[e],n(a({},t)))}),[t]);return{set:n,add:o,remove:r,index:t}})({}),I=g((()=>{const e=null==o?void 0:o[null!=h?h:""];e&&(O.set(Object.keys(y)),Object.entries(y).forEach((([t,n])=>{e(n).then((()=>{O.remove(t),j.push(t)})).catch((e=>{console.log("[ACTION ERROR]",e,e.stack),O.remove(t),P.add(t,e)}))})))}),[y,o,h]),k=g((e=>{b(e)}),[]),w=g((e=>v.array.reduce(((t,n)=>(t[n]=e[n],t)),{})),[v]),A=g(((e,t)=>{var n;return f(B,null,u(w(e),t),f(W,null,O.array.includes(t)?f(F,null):j.array.includes(t)?f(Q,null):Object.keys(P.index).includes(t)?f(V,{label:null==(n=P.index[t])?void 0:n.message},f(K,null)):null))}),[P.index,j.array,O.array,v]);return f(kn,a({module:n},l),f(H,{w:"100%"},f(L,{w:"100%"},f(wn,null),f(Dn,null),o?f(S,null,f(J,{onChange:e=>p(e.target.value),placeholder:"Actions",value:null==h?void 0:h.toString()},Object.entries(o).map((([e])=>f("option",{value:e},e)))),f(C,null,f(_,{onClick:I,"aria-label":"Run Actions",icon:f(X,null)}))):null,f(An,null)),f(Nn,{name:r,headers:v.array.map((e=>i[e])).concat(""),onChangeIndex:k},f(_n,null,A))))},xn=e=>{var t=e,{children:n,itemProps:o}=t,r=d(t,["children","itemProps"]);return f(oe,a({w:"100%",allowMultiple:!1,allowToggle:!0},r),(Array.isArray(n)?n:[n]).map((e=>f(ne,null,e))))},Ln=e=>{var t=e,{children:n,title:o}=t,r=d(t,["children","title"]);return f(B,null,f(se,{w:"100%"},f(ie,{w:"100%",alignItems:"center",justifyContent:"space-between"},f(ae,{size:"md"},o),f(ce,null))),f(re,a({},r),n))},Mn=()=>{const e=mn().client.Product.crud;return pn(e)},Gn=e=>{var t=e,{children:n,index:o}=t,r=d(t,["children","index"]);const s=Mn(),[i,c]=m({}),u=g((()=>Promise.all(Object.values(i).map((e=>{const t=e.id;t?s.crud.put(t,e):s.crud.create(e)})))),[s,i]),l=y((()=>Object.values(i).filter((e=>void 0!==e.id))),[i]);return f(fn,a({name:"products",onChangeIndex:(e,t)=>{c(e)},index:o},r),f(Ln,{title:f(L,{w:"100%"},f(On,null),f(de,null,Object.values(o).length," products,"," ",Object.values(i).length," selected,"," ",l.length," to update,"," ",Object.values(i).length-l.length," to be created"),f(ue,null),s.loading?f(F,null):null,f(T,{disabled:s.loading,onClick:u},"Import"))},n))},En=()=>{const e=mn().client.Order.crud;return pn(e)},qn=()=>f(de,null,f(ae,{w:"100%",size:"lg",textAlign:"center"},"Evosus Dashboard"),f(xn,null,f(Ln,{title:"Sync Products"},f(Rn,null)),f(Ln,{title:"Manage Orders"},f(zn,null)))),Rn=()=>{const{client:e}=mn(),{client:t}=sn(),{resolved:n}=Nt(t.inventoryApi.inventoryProductLineSearch),[o,r]=m(null),[s,i]=p(!1),a=Tt([]);Tt([]);const[c,d]=m(),u=g((()=>{o&&(a.set([]),i.on(),_t(e,t,{ProductLineID:o}).then(d).finally(i.off))}),[o,Dt,e,t,a]),l=y((()=>{if(c){const e=[].concat(...Object.values(c));return console.log({x:e}),dn(e,100).map((e=>e.reduce(((e,t)=>(e[t.sku]=t,e)),{})))}return[{}]}),[c]);return console.log(l),f(H,{w:"100%",justifyContent:"stretch",alignItems:"stretch",alignContent:"stretch",justifyItems:"stretch"},f(ae,{size:"sm"},"Select a product Line"),s?"Loading Product Lines":null,f(he,{onChange:r,value:null!=o?o:""},f(me,{columns:2},null==n?void 0:n.map((({ProductLine:e,ProductLineID:t})=>f(pe,{value:null==t?void 0:t.toString()},e))))),f(de,null,f(T,{onClick:u,w:"100%",mt:8,disabled:s||!o},"Search Products")),f(de,null,s?"Seaching products...":null),c?f(xn,null,null==l?void 0:l.map((e=>f(Gn,{index:e},f(Un,null))))):null)},Un=()=>{const{index:e}=bn(),t=Mn(),n=g((e=>t.array.find((({sku:t})=>t===e))),[t.array]);return f(me,{columns:2,gap:2},Object.keys(e).map((t=>{var o;const r=null!=(o=n(t))?o:e[t],s=r.id;return f(k.label,{p:4,w:"100%",bg:s?"blue.200":"green.200",justifyContent:"flex-start"},f(L,null,f(Sn,{id:t}),f(ae,{w:"100%",size:"sm"},s?"Update":"Create")),f(L,null,f(H,{w:"100%",alignItems:"flex-start"},r.id?f(de,null,"ID: ",r.id):null,f(de,null,"Sku: ",r.sku),f(de,null,"Name: ",r.name),f(de,null,"Price: ",r.price),f(de,null,"Stock Quantity: ",r.stock_quantity),f(de,null,"Weight: ",r.weight))))})))},$n=()=>{const{fetching:e,saving:t,options:n}=Ut();return f(xn,null,f(Ln,{title:"Dashboard"},f(rn,a({},n.evosus.options),f(qn,{clientID:n.gsc.options.access.clientID,gsgToken:n.gsc.options.access.gsgToken,companySN:n.evosus.options.access.companySN,ticket:n.evosus.options.access.ticket}))),f(Ln,{title:"Settings"},f(le,null,f(Rt,{secret:!0,obj:n.evosus.options.access,target:"companySN",label:"Company SN"}),f(Rt,{secret:!0,obj:n.evosus.options.access,target:"ticket",label:"Ticket"}),f(Rt,{obj:n.evosus,target:"defaultDistributionID",label:"Default distribution ID"}),f(Rt,{obj:n.evosus,target:"defaultPaymentID",label:"Default payment ID"}))))},zn=()=>{const{options:e}=Ut(),t=sn(),n=mn(),o=En(),r=g((r=>{var s;return(null==(s=r.meta_data.find((({key:e})=>"evosusId"===e)))?void 0:s.value)?Promise.reject(new Error("Order already posted")):wt(t.client,n.client)(r,{DistributionMethodID:e.evosus.defaultDistributionID}).then((e=>{o.crud.put(r.id,{meta_data:[{key:"evosusId",value:e}]})}))}),[t,n,e.evosus.defaultDistributionID]),s=g((r=>{var s,i;return(null==(i=null==(s=r.meta_data)?void 0:s.find((({key:e})=>"evosusPaymentId"===e)))?void 0:i.value)?Promise.reject(new Error("Order payment already applied")):At(t.client,n.client)(r,{paymentMethodId:e.evosus.defaultPaymentID?parseInt(e.evosus.defaultPaymentID):void 0}).then((e=>{o.crud.put(r.id,{meta_data:[{key:"evosusPaymentId",value:e}]})}))}),[t,n,e.evosus.defaultPaymentID]);return f(Tn,{name:"orders",headers:{id:"#ID",status:"Status",customer_id:"Customer ID",meta_data:"Evosus ID",paymentId:"Payment ID",distributionId:"Distribution ID",paymentMethodId:"Payment Method ID"},actions:{"Post Orders":r,"Apply Payments":s},display:["id","status","customer_id","meta_data","paymentId","distributionId","paymentMethodId"],module:o},(({id:t,status:n,customer_id:o,meta_data:r})=>{var s,i;return f(B,null,f(W,null,f(an,{id:t},t)),f(W,null,n),f(W,null,o),f(W,null,null==(s=null==r?void 0:r.find((({key:e})=>"evosusId"===e)))?void 0:s.value),f(W,null,null==(i=null==r?void 0:r.find((({key:e})=>"evosusPaymentId"===e)))?void 0:i.value),f(W,null,e.evosus.defaultDistributionID),f(W,null,e.evosus.defaultPaymentID))}))},Bn=e=>{var t,n=e,{options:o}=n,r=d(n,["options"]);return f(he,a({},r),f(me,{columns:2},Array.isArray(o)?o.map((e=>f(pe,{value:e},e))):null==(t=Object.entries(o))?void 0:t.map((([e,t])=>f(pe,{value:e},t)))))},Wn=()=>f(H,null,f(ae,{size:"lg"},"RB Integration Dashboard"),f(xn,null,f(Ln,{title:"Sync Products"},f(Vn,null)),f(Ln,{title:"Post Orders"},f(Qn,null)))),Fn=()=>{const{options:e}=Et();return f(xn,null,f(Ln,{title:"Dashboard"},f(Wt,a({},e.rb.options),f(Ht,a({},e.an.options),f(Wn,null)))),f(Ln,{title:"Settings"},f(le,null,f(Rt,{obj:e.rb.options.access,target:"CompanyID",label:"Company ID"}),f(Rt,{secret:!0,obj:e.rb.options.access,target:"APIKey",label:"API Key"}),f(Rt,{obj:e.rb.options.access,target:"name",label:"Company Name"}),f(Rt,{secret:!0,obj:e.an.options.credentials,target:"name",label:"Authorize.net Name"}),f(Rt,{secret:!0,obj:e.an.options.credentials,target:"transactionKey",label:"Authorize.net Transaction Key"}),f(Rt,{obj:e.an.options.credentials,target:"refId",label:"Authorize.net Ref ID (Optional)"}),f(Rt,{checkbox:!0,obj:e.an.options,target:"testMode",label:"Authorize.net test mode"}))))},Qn=()=>{const e=En(),t=mn(),n=Ft(),o=Jt(),r=g((r=>{var s,i;return(null==(i=null==(s=r.meta_data)?void 0:s.find((({key:e})=>"rbId"===e)))?void 0:i.value)?Promise.reject(new Error("Order already posted")):Je(n.client,t.client,o.client)(r).then((t=>e.crud.put(r.id,{meta_data:[{key:"rbId",value:t}]})))}),[n,e]);return f(Tn,{name:"orders",headers:{id:"#ID",status:"Status",meta_data:"RB ID",transaction_id:"Transaction ID",payment_method_title:"Payment Method"},actions:{"Post Orders":r},display:["id","status","meta_data","transaction_id","payment_method_title"],module:e},(({id:e,status:t,meta_data:n,transaction_id:o,payment_method_title:r})=>{var s;return f(B,null,f(W,null,f(an,{id:e},e)),f(W,null,t),f(W,null,null==(s=null==n?void 0:n.find((({key:e})=>"rbId"===e)))?void 0:s.value),f(W,null,o),f(W,null,r))}))},Vn=()=>{const{client:e}=mn(),{client:t}=Ft(),n=Nt(g(t.getDepartments,[t]),[t]),[o,r]=m(null),s=Nt(g(o?t.getCategories.bind(null,o):()=>Promise.reject("No dept selected"),[o]),[o]),[i,a]=m(null),c=Tt([]),d=Tt([]),[u,l]=p(!1),h=g((()=>{var n;o&&i&&(l.on(),t.getProducts(o,i).then((n=e,e=>n.Product.crud.getAll({sku:e.map((e=>e.ID)).join(",")}).then((t=>{const n=[],o=[];for(const r of e){const e=t.find((e=>e.sku===`${r.ID}`));e?o.push(Object.assign({id:e.id},Xe(r))):n.push(Xe(r))}return{create:n,update:o}})))).then((e=>{e.create&&c.concat(e.create),e.update&&d.concat(e.update)})).finally(l.off))}),[o,i]),v=y((()=>dn([...c.array,...d.array],100).map((e=>e.reduce(((e,t)=>(e[t.sku]=t,e)),{})))),[c,d]);return f(H,{w:"100%"},f(H,{w:"100%",alignItems:"stretch"},n.resolved?f(Bn,{onChange:r,options:n.resolved}):"Loading Deparments",s.resolved?f(Bn,{onChange:a,options:s.resolved}):"Loading Categories",f(T,{onClick:h,disabled:!o||!i||u},"Search Products")),v.length>0?f(xn,null,null==v?void 0:v.map((e=>f(Gn,{index:e},f(Kn,null))))):null)},Kn=()=>{const{index:e}=bn(),t=Mn(),n=g((e=>t.array.find((({sku:t})=>t===e))),[t.array]);return f(me,{columns:2,gap:2},Object.keys(e).map((t=>{var o,r;const s=null!=(o=n(t))?o:e[t],i=s.id;return f(k.label,{p:4,w:"100%",bg:i?"blue.200":"green.200",justifyContent:"flex-start"},f(L,null,f(Sn,{id:t}),f(ae,{w:"100%",size:"sm"},i?"Update":"Create")),f(L,null,f(H,{w:"100%",alignItems:"flex-start"},s.id?f(de,null,"ID: ",s.id):null,f(de,null,"Name: ",s.name),f(de,null,"Sku: ",s.sku),f(de,null,"Categories: ",null==(r=s.categories)?void 0:r.map((e=>e.name)).join(", ")),f(de,null,"Regular price: ",s.regular_price),f(de,null,"Sale price: ",s.sale_price),f(de,null,"Stock quantity: ",s.stock_quantity),f(de,null,"Description: ",s.description),f(de,null,"On sale start date: ",s.date_on_sale_from?new Date(s.date_on_sale_from).toLocaleString():null),f(de,null,"On sale end date: ",s.date_on_sale_to?new Date(s.date_on_sale_to).toLocaleString():null))))})))},Hn=({children:e})=>f(ye,{status:"error"},f(ve,null),f(ge,{mr:2},e),f(be,null)),Jn=fe({}),Xn=()=>{const{client:e}=tn(),{resolved:t,rejected:n}=Nt(e.getServices);return n?f(Hn,null,"Failed to authenticate client, verify credentials under Settings"):t?f(le,null,t.includes("Evosus")?f(A,{href:"/evosus"},"Evosus"):null,t.includes("RB")?f(A,{href:"/rb"},"RB"):null):f(F,null)},Yn=()=>{const{fetching:e,saving:t,options:n}=Ut();return f(de,null,f(xn,{defaultIndex:[0],allowMultiple:!1,allowToggle:!0},f(Ln,{title:"Integrations"},f(e?F:Xn,null)),f(Ln,{title:"Settings"},f(le,{spacing:3},f(Rt,{obj:n.gsc.options.access,target:"clientID",label:"Client ID"}),f(Rt,{secret:!0,obj:n.gsc.options.access,target:"gsgToken",label:"GSG Token"}),f(Rt,{secret:!0,obj:n.wc.options.access,target:"key",label:"WooCommerce API Key"}),f(Rt,{secret:!0,obj:n.wc.options.access,target:"secret",label:"WooCommerce API Secret"}),f(Rt,{secret:!0,obj:n.wc.options.access,target:"url",label:"Website URL"})))))},Zn=()=>{const{fetching:e,saving:t,options:n}=Ut();return f(ke,{theme:Jn},f(le,null,f(L,{as:"header",justifyContent:"center",alignItems:"center"},f(ae,null,f(A,{href:"/"},"Get Smart Plugin")),e||t?f(F,null):null),f(Ce,{path:"/"},(e=>f(_e,null,f(Pe,null,f(Ie,{as:A,href:"/"},"Home")),e.path.includes("evosus")?f(Pe,null,f(Ie,{as:A,href:"/evosus"},"Evosus")):null,e.path.includes("rb")?f(Pe,null,f(Ie,{as:A,href:"/rb"},"RB")):null)))),f(en,a({},n.gsc.options),f(Se,{history:Oe()},f(je,{path:"/",component:Yn}),f(je,{path:"/evosus",component:()=>f(hn,a({},n.wc.options),f($n,null))}),f(je,{path:"/rb",component:()=>f(hn,a({},n.wc.options),f(Fn,null))}))))};var eo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",WordpressDashboard:e=>f(qt,a({},e),f(Zn,null))});window.global=window,console.log("LOAD GSG PREACT COMPONENTS"),null==window||window.addEventListener("load",(()=>{document.querySelectorAll("[data-component]").forEach((e=>{const t=e.getAttribute("data-component"),n=e.getAttributeNames().reduce(((t,n)=>{if(n&&"data-component"!==n){const o=e.getAttribute(n);o&&(t[n]=o)}return t}),{});if(t){const o=eo[t];o&&we(f(o,a({},n)),e)}}))}));
