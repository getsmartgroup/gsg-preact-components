export const fun = (type, f) => {
    return (...params) => {
        return type.returnType().parse(f(type.parameters().parse(params)));
    };
};
export default fun;
export const addAsyncHook = (f, effect, capture, filter, final) => {
    return ((...p) => {
        var _a;
        return f(...((_a = filter === null || filter === void 0 ? void 0 : filter(...p)) !== null && _a !== void 0 ? _a : p))
            .then(res => {
            return effect(res);
        })
            .catch(capture)
            .finally(final);
    }).bind(f);
};
export const addSafeHook = (f, effect, capture, filter, final) => {
    return addAsyncHook(f, res => {
        effect(res);
        return res;
    }, capture, (...p) => {
        filter === null || filter === void 0 ? void 0 : filter(...p);
        return p;
    }, final);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2NvbW1vbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxNQUFNLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBa0MsSUFBTyxFQUFFLENBQWEsRUFBRSxFQUFFO0lBQzlFLE9BQU8sQ0FBQyxHQUFHLE1BQTRDLEVBQXdDLEVBQUU7UUFDaEcsT0FBTyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQTtJQUNuRSxDQUFDLENBQUE7QUFDRixDQUFDLENBQUE7QUFDRCxlQUFlLEdBQUcsQ0FBQTtBQUdsQixNQUFNLENBQUMsTUFBTSxZQUFZLEdBQUcsQ0FDM0IsQ0FBSSxFQUNKLE1BQXdDLEVBQ3hDLE9BQThCLEVBQzlCLE1BQStDLEVBQy9DLEtBQTRCLEVBQzNCLEVBQUU7SUFDSCxPQUFRLENBQUMsQ0FBQyxHQUFHLENBQVEsRUFBRSxFQUFFOztRQUN4QixPQUFBLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBQSxNQUFNLGFBQU4sTUFBTSx1QkFBTixNQUFNLENBQUcsR0FBSSxDQUFtQixDQUFDLG1DQUFJLENBQUMsQ0FBQyxDQUFDO2FBQzVDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUNYLE9BQU8sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ25CLENBQUMsQ0FBQzthQUNELEtBQUssQ0FBQyxPQUFPLENBQUM7YUFDZCxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUE7S0FBQSxDQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ2pDLENBQUMsQ0FBQTtBQUNELE1BQU0sQ0FBQyxNQUFNLFdBQVcsR0FBRyxDQUMxQixDQUFJLEVBQ0osTUFBd0MsRUFDeEMsT0FBOEIsRUFDOUIsTUFBcUMsRUFDckMsS0FBNEIsRUFDM0IsRUFBRTtJQUNILE9BQU8sWUFBWSxDQUNsQixDQUFDLEVBQ0QsR0FBRyxDQUFDLEVBQUU7UUFDTCxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDWCxPQUFPLEdBQUcsQ0FBQTtJQUNYLENBQUMsRUFDRCxPQUFPLEVBQ1AsQ0FBQyxHQUFHLENBQWdCLEVBQUUsRUFBRTtRQUN2QixNQUFNLGFBQU4sTUFBTSx1QkFBTixNQUFNLENBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQTtRQUNkLE9BQU8sQ0FBQyxDQUFBO0lBQ1QsQ0FBQyxFQUNELEtBQUssQ0FDTCxDQUFBO0FBQ0YsQ0FBQyxDQUFBIn0=