import { useBoolean } from '@chakra-ui/react';
import { useCallback, useEffect, useMemo, useState } from 'preact/hooks';
export const usePromiseCall = (promiseCall, inputs = []) => {
    const [resolved, setResolved] = useState(null);
    const [rejected, setRejected] = useState(null);
    const [loading, setLoading] = useBoolean(true);
    useEffect(() => {
        setResolved(null);
        setRejected(null);
        setLoading.on();
        if (promiseCall) {
            promiseCall()
                .then(setResolved)
                .catch(setRejected)
                .finally(setLoading.off);
        }
    }, inputs);
    return {
        resolved,
        rejected,
        loading
    };
};
export const useArray = (initial) => {
    const [value, _set] = useState(() => ({ array: initial }));
    // prettier-ignore
    const res = useMemo(() => {
        const set = (data) => _set({ array: data });
        const push = (data) => set([...value.array, data]);
        const concat = (data) => set([...value.array, ...data]);
        const remove = (data) => set(value.array.filter(e => e !== data));
        return {
            set,
            push,
            concat,
            remove,
            array: value.array
        };
    }, [value.array]);
    return res;
};
export const useSingleIndex = (initial) => {
    const [index, set] = useState(() => initial);
    // prettier-ignore
    const add = useCallback((id, data) => set(Object.assign(Object.assign({}, index), { [id]: data })), [index]);
    const remove = useCallback((id) => {
        if (index[id]) {
            delete index[id];
            set(Object.assign({}, index));
        }
    }, [index]);
    return {
        set,
        add,
        remove,
        index
    };
};
// istanbul ignore next
const isObject = (obj) => {
    if (typeof obj === 'object' && obj !== null) {
        if (typeof Object.getPrototypeOf === 'function') {
            const prototype = Object.getPrototypeOf(obj);
            return prototype === Object.prototype || prototype === null;
        }
        return Object.prototype.toString.call(obj) === '[object Object]';
    }
    return false;
};
export const merge = (...objects) => objects.reduce((result, current) => {
    Object.keys(current).forEach(key => {
        if (Array.isArray(result[key]) && Array.isArray(current[key])) {
            result[key] = Array.from(new Set(result[key].concat(current[key])));
        }
        else if (isObject(result[key]) && isObject(current[key])) {
            result[key] = merge(result[key], current[key]);
        }
        else {
            result[key] = current[key];
        }
    });
    return result;
}, {});
export default merge;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2hvb2tzL2NvbW1vbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sa0JBQWtCLENBQUE7QUFDN0MsT0FBTyxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGNBQWMsQ0FBQTtBQUV4RSxNQUFNLENBQUMsTUFBTSxjQUFjLEdBQUcsQ0FBc0IsV0FBOEIsRUFBRSxTQUFnQixFQUFFLEVBQUUsRUFBRTtJQUN6RyxNQUFNLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxHQUFHLFFBQVEsQ0FBVyxJQUFJLENBQUMsQ0FBQTtJQUN4RCxNQUFNLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxHQUFHLFFBQVEsQ0FBTSxJQUFJLENBQUMsQ0FBQTtJQUNuRCxNQUFNLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUM5QyxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2QsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ2pCLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNqQixVQUFVLENBQUMsRUFBRSxFQUFFLENBQUE7UUFDZixJQUFJLFdBQVcsRUFBRTtZQUNoQixXQUFXLEVBQUU7aUJBQ1gsSUFBSSxDQUFDLFdBQVcsQ0FBQztpQkFDakIsS0FBSyxDQUFDLFdBQVcsQ0FBQztpQkFDbEIsT0FBTyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQTtTQUN6QjtJQUNGLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQTtJQUNWLE9BQU87UUFDTixRQUFRO1FBQ1IsUUFBUTtRQUNSLE9BQU87S0FDUCxDQUFBO0FBQ0YsQ0FBQyxDQUFBO0FBRUQsTUFBTSxDQUFDLE1BQU0sUUFBUSxHQUFHLENBQUksT0FBWSxFQUFFLEVBQUU7SUFDM0MsTUFB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